<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>2 - Data Binding</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>
<body id="app">
  <main class="container py-5">
    <h1>Gestion des événements en Vue JS</h1>
    <!-- formulaire d'ajout d'une nouvelle todo -->
    <div class="card my-3">
      <div class="card-header"><h2 class="h4">Créer une todo</h2></div>
      <div class="card-body">
        <div class="row align-items-end">
          <div class="col-10">
            <!-- ici il faut binder le formulaire sur le texte de la nouvelle todo à créer -->
            <label for="todoText" class="form-label visually-hidden">Texte de la todo</label>
            <input v-model="formTodo.text" type="text" class="form-control" id="todoText" required>
          </div>
          <div class="col-2 d-grid">
            <!-- au click du bouton, déclencher une méthode pour injecter une nouvelle todo dans le tableau des todos -->
            <button @click="onCreateTodo()" class="btn btn-block btn-primary">Créer</button>
          </div>
        </div>
      </div>
    </div>

    <!-- exercice créer une TODO liste -->
    <ul id="todos" class="list-group">
      <!-- structure référence à créer 
      <li class="list-group-item">[case à cocher readonly] Titre de la todo (+classe barrer si achevée: "text-decoration-line-through") + bouton modifier + bouton supprimer</li> 
      -->
      <li v-for="todo in todos" :key="todo.id" class="list-group-item d-flex align-items-center gap-2">
        <div class="form-check form-switch">
          <input class="form-check-input" type="checkbox" role="switch" :id="'check-' + todo.id" v-model="todo.done">
          <label class="form-check-label visually-hidden" :for="'check-' + todo.id">Terminé</label>
        </div>
        <!-- affichage simple d'une todo -->
        <template v-if="!todo.edit">
          <div :class="{ 'text-decoration-line-through': todo.done }">{{ todo.text }}</div>
          <div class="ms-auto d-flex gap-2">
            <button @click="onDelete(todo.id)" class="btn btn-danger">Supprimer</button>
            <button @click="onEdit(todo.id)" class="btn btn-info">Modifier</button>
          </div>
        </template>

        <!-- affichage en mode edition -->
        <template v-else>
          <div class="w-100">
            <input type="text" class="form-control" v-model="todo.form">
          </div>
          <div class="d-flex gap-2">
            <button @click="onCancel(todo.id)" class="btn btn-secondary">Annuler</button>
            <button @click="onSave(todo)" class="btn btn-success">Enregistrer</button>
          </div>
        </template>
      </li>
    </ul>

    <p class="mt-5"><input class="form-check-input" type="checkbox" role="switch" v-model="debug"> Debug</p>
    <pre v-if="debug">
      {{todos}}
    </pre>
    <!-- 
    Exercice TODO:
    Réaliser une Todo liste en Vue JS, ajouter un tableau de 5 todos dans les données du contrôleur, chaque todo aura la structure suivante :
    {
      id: 1,
      text: 'Titre de la todo',
      done: false,
    },
    afficher les todos dans la vue à l'aide d'une boucle dans le ul#todos située ci-dessus dans le code
``
 -->
  </main>
  
  <script type="module" src="js/app-corrige.js"></script>
</body>
</html>